<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NewBook Assistant - Settings</title>
  <link rel="stylesheet" href="settings.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>NewBook Assistant Settings</h1>
    </header>

    <main>
      <section class="settings-section">
        <h2>API Configuration</h2>
        <div class="form-group">
          <label for="apiRootUrl">API Root URL</label>
          <input
            type="url"
            id="apiRootUrl"
            placeholder="https://admin.hotelnumberfour.com/wp-json/bma/v1"
            required
          >
          <small>The base URL for the Booking Match API endpoint</small>
        </div>

        <div class="form-group">
          <label for="username">Username</label>
          <input
            type="text"
            id="username"
            placeholder="reception"
            required
          >
          <small>WordPress username for API authentication</small>
        </div>

        <div class="form-group">
          <label for="applicationPassword">Application Password</label>
          <input
            type="password"
            id="applicationPassword"
            placeholder="xxxx xxxx xxxx xxxx xxxx xxxx"
            required
          >
          <small>WordPress Application Password (spaces will be removed automatically)</small>
        </div>
      </section>

      <section class="settings-section">
        <h2>Sidebar Behavior</h2>
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="enableSidebarOnNewBook">
            <span>Enable sidebar on NewBook domain</span>
          </label>
          <small>Automatically enable the sidepanel when viewing NewBook pages</small>
        </div>
      </section>

      <section class="settings-section">
        <h2>Summary Tab Settings</h2>
        <div class="form-group">
          <label for="recentBookingsCount">Number of recent bookings to display</label>
          <input
            type="number"
            id="recentBookingsCount"
            min="1"
            max="50"
            value="10"
          >
          <small>How many recent bookings to show in the summary (1-50)</small>
        </div>

        <div class="form-group">
          <label for="summaryRefreshRate">Summary refresh rate (seconds)</label>
          <input
            type="number"
            id="summaryRefreshRate"
            min="10"
            max="300"
            value="60"
          >
          <small>How often to automatically refresh the summary tab (10-300 seconds)</small>
        </div>

        <div class="form-group">
          <label for="highlightNewestMinutes">Highlight newest bookings (minutes)</label>
          <input
            type="number"
            id="highlightNewestMinutes"
            min="0"
            max="1440"
            value="60"
          >
          <small>Highlight bookings placed within this many minutes with a green glow (0-1440)</small>
        </div>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="autoRefreshOnStaleCache" checked>
            <span>Auto-refresh when cached data is displayed</span>
          </label>
          <small>Automatically refresh the tab after 10 seconds when outdated cached data is shown (indicated by sync_problem icon)</small>
        </div>

        <div class="form-group">
          <label for="cancelledHours">Show cancelled bookings from last</label>
          <select id="cancelledHours">
            <option value="24">24 hours</option>
            <option value="48">48 hours</option>
            <option value="72">72 hours</option>
          </select>
          <small>Display cancelled bookings from the last X hours in the Summary tab</small>
        </div>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="includeFlaggedCancelled" checked>
            <span>Include older cancelled bookings with flags</span>
          </label>
          <small>Show cancelled bookings older than the time window if they have critical flags (e.g., orphaned ResOS bookings)</small>
        </div>
      </section>

      <section class="settings-section">
        <h2>Planner Integration</h2>
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="enablePlannerClickUpdate">
            <span>Update booking on planner single-click</span>
          </label>
          <small>Automatically update the sidepanel when clicking bookings in the planner view</small>
        </div>
      </section>

      <section class="settings-section">
        <h2>Restaurant Tab Behavior</h2>
        <div class="form-group">
          <label for="inactivityTimeout">Return to summary after inactivity (seconds)</label>
          <input
            type="number"
            id="inactivityTimeout"
            min="10"
            max="600"
            value="60"
          >
          <small>Return to summary tab after this many seconds of inactivity on Restaurant/Checks tabs (10-600 seconds)</small>
        </div>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="pauseInactivityWhenFormOpen">
            <span>Pause inactivity timer when create form is open</span>
          </label>
          <small>Prevent automatic return to summary when the create booking form is expanded</small>
        </div>
      </section>

      <section class="settings-section">
        <h2>Debug Settings</h2>
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="enableDebugLogging">
            <span>Enable debug logging</span>
          </label>
          <small>Enable console logging for debugging purposes (disable in production to improve performance)</small>
        </div>
      </section>

      <div class="button-group">
        <button id="testConnection" class="button button-secondary">Test Connection</button>
        <button id="saveSettings" class="button button-primary">Save Settings</button>
      </div>

      <div id="status" class="status hidden"></div>
    </main>
  </div>

  <script src="settings.js"></script>
</body>
</html>
